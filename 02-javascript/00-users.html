<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Hello, world!</title>

    <script>
        window.incrementValue = 0;

        function showIncrementedValue() {
            let valueOutput = document.querySelector('.incrementor-container h1[incremented-value]')
            valueOutput.innerHTML = window.incrementValue;
        }

        function increment() {
            window.incrementValue = window.incrementValue +1;
            showIncrementedValue();
        }

        function resetIncrement() {
            window.incrementValue = 0;
            showIncrementedValue();
        }

        //Quando o docuemnto estiver completamente carregado
        document.addEventListener('DOMContentLoaded', function() {
            showIncrementedValue();

            let decrementor = document.querySelector('button[decrement-action="decrement"]');
            decrementor.addEventListener('click', (event) => {
                window.incrementValue = window.incrementValue -1;
                showIncrementedValue();
            });
        });

    </script>
</head>

<body>
    <div class="container my-4">
        <div class="row">
            <div class="col-12 mb-3 border pt-3 incrementor-container">
                <div class="btn-group w-100 mb-3">
                    <button
                        type="button" decrement-action="decrement"
                        class="btn btn-warning">
                        - Decrement
                    </button>

                    <button
                        type="button" decrement-action="increment"
                        onclick="increment()"
                        class="btn btn-success">
                        Increment +
                    </button>
                </div>

                <div class="btn-group w-100 mb-3">
                    <button
                        type="button" decrement-action="resetIncrement"
                        onclick="resetIncrement()"
                        class="btn btn-danger">
                        Reset
                    </button>
                </div>

                <div class="w-100 text-center">
                    <h1 incremented-value></h1>
                </div>
            </div>

            <div class="col-12">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Name</th>
                            <th scope="col">Lastname</th>
                            <th scope="col">Age</th>
                            <th scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>

            <div class="col-12"></div>
        </div>
    </div>

    <script>
        const users = [
            {
                name: "Tiago",
                lastName: "Fran√ßa",
                age: 28,
            },
            {
                name: "Fabio",
                lastName: "Freitas",
                age: 36,
            },
            {
                name: "Eris",
                lastName: "Alves",
                age: 38,
            },
            {
                name: "Paulo",
                lastName: "Fernandes",
                age: 1,
            }
        ];

        let template = `
            <th scope="row">#INDEX#</th>
            <td>#NAME#</td>
            <td>#LASTNAME#</td>
            <td>#AGE#</td>
            <td>
                <buttton class="btn btn-outline-info" type="button" onclick="alert('Clicado #INDEX#')">
                    Clicar
                </buttton>
            </td>`;

        document.addEventListener('DOMContentLoaded', function ()
        {
            let userListContainer = document.querySelector('table tbody');
            users.forEach((user, index) =>
            {
                let row = document.createElement('tr');
                let rowContent = template;

                row.setAttribute('data-user-index', index);

                rowContent = rowContent.replaceAll('#INDEX#', index);
                rowContent = rowContent.replaceAll('#NAME#', user.name);
                rowContent = rowContent.replaceAll('#LASTNAME#', user.lastName);
                rowContent = rowContent.replaceAll('#AGE#', user.age);

                row.innerHTML = rowContent;

                userListContainer.appendChild(row);
            });
        });
    </script>
</body>

</html>
